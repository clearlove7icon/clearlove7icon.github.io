
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>node3 | Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="John Doe">
    
    <meta name="description" content="Node第四课
Express 框架、模板，MongoDB数据库，小型电商~

Express 模板这是一个用户量较大的一个Node框架，提供了一整套的Node模板，在里面可以使用EJS模板引擎..
基于 Node.js 平台，快速、开放、极简的 web 开发框架。（开发后端）
Express的性能">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="Hexo" title="Hexo"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Hexo">Hexo</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/22/node3/" title="node3" itemprop="url">node3</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="John Doe">John Doe</a>
    </p>
  <p class="article-time">
    <time datetime="2017-11-22T04:11:18.000Z" itemprop="datePublished">2017-11-22</time>
    Updated:<time datetime="2017-11-22T04:11:47.157Z" itemprop="dateModified">2017-11-22</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Node第四课"><span class="toc-number">1.</span> <span class="toc-text">Node第四课</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Express-模板"><span class="toc-number">1.0.1.</span> <span class="toc-text">Express 模板</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#用法："><span class="toc-number">1.0.1.1.</span> <span class="toc-text">用法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#模板引擎："><span class="toc-number">1.0.1.2.</span> <span class="toc-text">模板引擎：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#服务端渲染："><span class="toc-number">1.0.1.3.</span> <span class="toc-text">服务端渲染：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MongoDB-数据库"><span class="toc-number">1.0.2.</span> <span class="toc-text">MongoDB 数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#关系型数据库和非关系型数据库的区别"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">关系型数据库和非关系型数据库的区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-安装MongoDB"><span class="toc-number">1.0.3.</span> <span class="toc-text">1.安装MongoDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MongoDB概念"><span class="toc-number">1.0.4.</span> <span class="toc-text">2.MongoDB概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-专业术语"><span class="toc-number">1.0.5.</span> <span class="toc-text">3.专业术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式："><span class="toc-number">1.0.6.</span> <span class="toc-text">4.mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-数据库"><span class="toc-number">1.0.7.</span> <span class="toc-text">5.数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-简单操作"><span class="toc-number">1.0.8.</span> <span class="toc-text">6.简单操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-文档"><span class="toc-number">1.0.9.</span> <span class="toc-text">7.文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-集合"><span class="toc-number">1.0.10.</span> <span class="toc-text">8.集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-数据类型"><span class="toc-number">1.0.11.</span> <span class="toc-text">9.数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-库的操作"><span class="toc-number">1.0.12.</span> <span class="toc-text">10.库的操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Collection聚集集合操作"><span class="toc-number">1.0.13.</span> <span class="toc-text">Collection聚集集合操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加、修改与删除集合数据"><span class="toc-number">1.1.</span> <span class="toc-text">添加、修改与删除集合数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#聚集集合查询"><span class="toc-number">1.1.1.</span> <span class="toc-text">聚集集合查询</span></a></li></ol></li></ol></li></ol>
		</div>
		
		<h2 id="Node第四课"><a href="#Node第四课" class="headerlink" title="Node第四课"></a>Node第四课</h2><blockquote>
<p>Express 框架、模板，MongoDB数据库，小型电商~</p>
</blockquote>
<h4 id="Express-模板"><a href="#Express-模板" class="headerlink" title="Express 模板"></a>Express 模板</h4><p>这是一个用户量较大的一个Node框架，提供了一整套的Node模板，在里面可以使用EJS模板引擎..</p>
<p>基于 Node.js 平台，快速、开放、极简的 web 开发框架。（开发后端）</p>
<p>Express的性能对Node没有影响，依然很高。</p>
<h5 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h5><p>安装方法：</p>
<ol>
<li><p>全局安装express 和express应用生成器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install express -g</span><br><span class="line">npm install express-generator -g</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用应用生成器去创建应用</p>
</li>
</ol>
<p>-e 代表使用ejs模板引擎，否则会使用jade模板引擎</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd:   express project(项目名字) -e（使用ejs模板引擎）</span><br></pre></td></tr></table></figure>
<ol>
<li>安装依赖，进入到创建好的项目中安装依赖</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd project</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>应用分析：</p>
<ol>
<li><p>package.json</p>
<p> body-parse：专门负责解析前端传递来的数据</p>
<p> cookie-parser：解析请求头中的cookie信息</p>
<p> ejs：模板引擎编译工具</p>
<p> serve-favicon：专门处理类似于谷歌浏览主动请求favicon.ico文件的问题</p>
</li>
<li><p>bin/www 这个是和创建的服务相关的东西，可以在这里配置端口等等设置。</p>
</li>
<li><p>public：静态资源文件夹，在这个文件夹里的文件，在前端都可以直接访问，不需要再在后端配置路由， /stylesheets/a.css</p>
</li>
<li><p>app.js：主应用文件，在这里可以设置路由、插件等等之类的东西，其实创建出来的就是requestListener</p>
</li>
<li><p>views:放入ejs模板，express会将ejs模板装换成html文件</p>
</li>
<li><p>routes:里面的全是路由文件，专门来处理不同的请求</p>
</li>
</ol>
<h5 id="模板引擎："><a href="#模板引擎：" class="headerlink" title="模板引擎："></a>模板引擎：</h5><p>在前端开发过程中，有很多模板引擎可以使用，例如jade，ejs等等，使用模板引擎的优点：</p>
<ol>
<li><p>可以在模板引擎文件里去写一些逻辑性的代码,用于服务端渲染，提高seo优化级别</p>
</li>
<li><p>可以使用便捷语法来开发html结构代码（jade）。</p>
</li>
</ol>
<p>什么是ejs：</p>
<p>ejs是一个简单高效的模板语言，通过数据和模板，可以生成html标记文本，可以说ejs是一个js库，ejs可以运行在客户端和服务器端，客户端安装直接用引入文件即可，服务端要用npm包安装</p>
<ul>
<li><p>ejs的特点：</p>
</li>
<li><p>快速编译和渲染</p>
</li>
<li><p>简单的模板标签</p>
</li>
<li><p>自定义标记分隔符</p>
</li>
<li><p>支持文本包含</p>
</li>
<li><p>支持浏览器端和服务器端</p>
</li>
<li><p>模板静态缓存</p>
</li>
<li><p>支持express视图系统</p>
</li>
</ul>
<h5 id="服务端渲染："><a href="#服务端渲染：" class="headerlink" title="服务端渲染："></a>服务端渲染：</h5><p>其实前端开发需要做的事情，只有两个：1. 创建界面结构 2. 数据交互  3. 渲染数据</p>
<p>数据交互其实又可以分成两种：1. 给后端数据 2. 从后端拿数据</p>
<p>数据交互的目的是什么？取：将数据渲染到dom文档中 给：提交数据到后台后，后台会继续返回我们一个数据，拿到这个数据，依然还是需要渲染</p>
<p>数据渲染方式分为两种：</p>
<ol>
<li><p>客户端渲染（浏览器渲染）：前端js通过ajax等数据交互技术，获取到数据后通过操作dom来进行数据的渲染</p>
<p> 例如，ajax获取到用户购物车的信息，通过拼接字符串的方法将数据渲染在dom中</p>
</li>
<li><p>服务端渲染，浏览器请求到的内容其实可以通过后端加工一下,将一会数据直接渲染好，再给浏览器就可以了</p>
<p> 例如，每个学期开始的时候，学生会得到课本，。课本上的空题都需要学生自己去写，当学期末写完的时候，相当于客户端将数据渲染在浏览器中，学生将答案写在了课本上</p>
<p> 通过，老师都可以得到教材课本，在这种课本上，答案，讲义等等都已经印刷好了，相当于服务端将数据渲染在浏览器，书商将答案印在了课本上</p>
<p> 客户端渲染的优点：比较灵活；经过用户的动作进行加载的数据</p>
<p> 服务端渲染的优点：减少了前端逻辑，提高了SEO优化等级，只要是在页面加载的时候就需要渲染的数据，变动较少的数据</p>
</li>
</ol>
<pre><code>在php中实现服务端渲染：

在php文件中可以放入html代码，访问php文件的时候就相当于访问这个对应的html文件，因为在php文件中，所以可以写一些php的代码来渲染数据

在Node中实现服务端渲染：

利用模板引擎，node在渲染模板的时候给模板传入数据，在模板中就可以使用特定的语法来渲染dom了
</code></pre><hr>
<p>注意：express里的路由是靠请求路径划分的，前一个自己搭的路由是根据请求类型划分的。</p>
<h4 id="MongoDB-数据库"><a href="#MongoDB-数据库" class="headerlink" title="MongoDB 数据库"></a>MongoDB 数据库</h4><p>这是一个数据库，与MySQL(关系型数据库)的区别就是，它是一个非关系型数据库  NoSql数据库</p>
<h5 id="关系型数据库和非关系型数据库的区别"><a href="#关系型数据库和非关系型数据库的区别" class="headerlink" title="关系型数据库和非关系型数据库的区别"></a>关系型数据库和非关系型数据库的区别</h5><p>1.实质。    </p>
<p>非关系型数据库的实质：非关系型数据库产品是传统关系型数据库的功能阉割版本，通过减少用不到或很少用的功能，来大幅度提高产品性能。</p>
<p>2.价格。</p>
<p>目前基本上大部分主流的非关系型数据库都是免费的。而比较有名气的关系型数据库，比如Oracle、DB2、MSSQL是收费的。虽然Mysql免费，但它需要做很多工作才能正式用于生产。</p>
<p>3.功能。    </p>
<p>实际开发中，有很多业务需求，其实并不需要完整的关系型数据库功能，非关系型数据库的功能就足够使用了。这种情况下，使用性能更高、成本更低的非关系型数据库当然是更明智的选择。</p>
<p>mongodb的特点：</p>
<ol>
<li>性能高、I/O处理快</li>
<li>速度快</li>
<li>稳定不好，占用空间大</li>
</ol>
<h4 id="1-安装MongoDB"><a href="#1-安装MongoDB" class="headerlink" title="1.安装MongoDB"></a>1.安装MongoDB</h4><p>下载对应版本的mongodb来进行安装，安装的后注意需要手动设置数据库的位置。。。详细请搜索</p>
<p>1.在安装的时候选择安装地址，一般情况下安装在c盘（默认安装地址）即可</p>
<p>2.我们在c盘（最好）建立一个data文件夹，在data文件夹下面再建立一个db文件夹</p>
<p>3.在mongodb的bin文件夹下，cmd执行 mongod.exe –dbpath c:\data\db</p>
<p>4.运行mongod.exe来启动mongodb</p>
<p>5.依然在mongodb的bin文件夹下cmd 输入mongo回车，就可以操作mongodb，例如 show databases;</p>
<blockquote>
<p>小贴士：如果安装不上，因为有一些个dll文件缺少，要么去按照百度教的方法下载驱动精灵修复系统，要么重装系统，要么就用自己的电脑</p>
</blockquote>
<h4 id="2-MongoDB概念"><a href="#2-MongoDB概念" class="headerlink" title="2.MongoDB概念"></a>2.MongoDB概念</h4><p>MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。</p>
<p>它的特点:高性能、易部署、易使用，存储数据非常方便。</p>
<h4 id="3-专业术语"><a href="#3-专业术语" class="headerlink" title="3.专业术语"></a>3.专业术语</h4><table>
<thead>
<tr>
<th>SQL术语、概念</th>
<th>MongoDB术语、概念</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>database</td>
<td>database</td>
<td>数据库</td>
</tr>
<tr>
<td>table</td>
<td>collection</td>
<td>表\集合</td>
</tr>
<tr>
<td>row</td>
<td>doucument</td>
<td>数据记录行\文档</td>
</tr>
<tr>
<td>column</td>
<td>field</td>
<td>数据字段\域</td>
</tr>
<tr>
<td>index</td>
<td>index</td>
<td>索引</td>
</tr>
<tr>
<td>table joins</td>
<td></td>
<td>表连接 mongodb不支持</td>
</tr>
<tr>
<td>primary key</td>
<td>primary key</td>
<td>主键，mongodb自动将_id作为主键</td>
</tr>
</tbody>
</table>
<h4 id="4-mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式："><a href="#4-mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式：" class="headerlink" title="4.mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式："></a>4.mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;_id&quot;:ObjectId(&quot;1726iuhas678971726731&quot;),</span><br><span class="line">        &quot;age&quot;:25,</span><br><span class="line">        &quot;city&quot;:&quot;beijing&quot;,</span><br><span class="line">        &quot;email&quot;:&quot;asdgakj@qq.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;_id&quot;:ObjectId(&quot;1726iuhas678971726731&quot;),</span><br><span class="line">        &quot;age&quot;:25,</span><br><span class="line">        &quot;city&quot;:&quot;beijing&quot;,</span><br><span class="line">        &quot;email&quot;:&quot;asdgakj@qq.com&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="5-数据库"><a href="#5-数据库" class="headerlink" title="5.数据库"></a>5.数据库</h4><p>一个mongodb中可以建立多个数据库。</p>
<p>MongoDB的默认数据库为”db”，该数据库存储在data目录中。</p>
<p>MongoDB的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。</p>
<h4 id="6-简单操作"><a href="#6-简单操作" class="headerlink" title="6.简单操作"></a>6.简单操作</h4><p>show databases 查看数据库</p>
<p>db 查看当前数据库</p>
<p>use name 切换某个数据库</p>
<h4 id="7-文档"><a href="#7-文档" class="headerlink" title="7.文档"></a>7.文档</h4><p>文档是一个键值(key-value)对(即BSON)。</p>
<p>MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。<br>一个简单的文档例子如下：<br>[<br>    {“genres”: [“犯罪”,”剧情” ],”title”: “肖申克的救赎”},<br>    {“title”:”阿甘正传”,grade:”8.4”,”genres”:”励志”}<br>]</p>
<h4 id="8-集合"><a href="#8-集合" class="headerlink" title="8.集合"></a>8.集合</h4><p>集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System)中的表格。</p>
<p>集合存在于数据库中，集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &apos;title&apos;:[&apos;aaa&apos;,&quot;aaa&quot;,&quot;aaa&quot;,[&quot;a&quot;:&#123;&#125;]]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    &apos;title&apos;:&apos;bbb&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-数据类型"><a href="#9-数据类型" class="headerlink" title="9.数据类型"></a>9.数据类型</h4><p>String : 这是最常用的数据类型来存储数据。在MongoDB中的字符串必须是有效的UTF-8。</p>
<p>Integer : 这种类型是用来存储一个数值。整数可以是32位或64位，这取决于您的服务器。</p>
<p>Boolean : 此类型用于存储一个布尔值 (true/ false) 。</p>
<p>Double : 这种类型是用来存储浮点值。</p>
<p>Min/ Max keys : 这种类型被用来对BSON元素的最低和最高值比较。</p>
<p>Arrays : 使用此类型的数组或列表或多个值存储到一个键。</p>
<p>Timestamp : 时间戳。这可以方便记录时的文件已被修改或添加。</p>
<p>Object : 此数据类型用于嵌入式的文件。</p>
<p>Null : 这种类型是用来存储一个Null值。</p>
<p>Symbol : 此数据类型用于字符串相同，但它通常是保留给特定符号类型的语言使用。</p>
<p>Date : 此数据类型用于存储当前日期或时间的UNIX时间格式。可以指定自己的日期和时间，日期和年，月，日到创建对象。</p>
<p>Object ID : 此数据类型用于存储文档的ID。</p>
<p>Binary data : 此数据类型用于存储二进制数据。</p>
<p>Code : 此数据类型用于存储到文档中的JavaScript代码。</p>
<p>Regular expression : 此数据类型用于存储正则表达式</p>
<h4 id="10-库的操作"><a href="#10-库的操作" class="headerlink" title="10.库的操作"></a>10.库的操作</h4><ul>
<li>Help查看命令提示</li>
</ul>
<p>help</p>
<p>db.help()</p>
<p>db.test.help()</p>
<p>db.test.find().help()</p>
<ul>
<li>创建/切换数据库</li>
</ul>
<p>use music</p>
<ul>
<li>查询数据库</li>
</ul>
<p>show dbs 空库将不会显示</p>
<p>db.albums.insertOne({‘title’:’bey bey’})来插入一条后再看</p>
<ul>
<li>查看当前使用的数据库</li>
</ul>
<p>db/db.getName()</p>
<ul>
<li>显示当前DB状态</li>
</ul>
<p>db.stats()</p>
<ul>
<li>查看当前DB版本</li>
</ul>
<p>db.version()</p>
<ul>
<li>查看当前DB的链接机器地址</li>
</ul>
<p>db.getMongo()</p>
<ul>
<li>删除数据库</li>
</ul>
<p>db.dropDatabase()</p>
<h4 id="Collection聚集集合操作"><a href="#Collection聚集集合操作" class="headerlink" title="Collection聚集集合操作"></a>Collection聚集集合操作</h4><p>创建一个聚集集合</p>
<p>db.createCollection(“collName”, {size（集合大小）: 20, capped（固定大小，可提高使用效率）: true, max（最大值）: 100});</p>
<p>db.collName.isCapped(); //判断集合是否为定容量</p>
<p>得到指定名称的聚集集合</p>
<p>db.getCollection(“account”);</p>
<p>得到当前db的所有聚集集合</p>
<p>db.getCollectionNames();</p>
<p>显示当前db所有聚集的状态</p>
<p>db.printCollectionStats();</p>
<h3 id="添加、修改与删除集合数据"><a href="#添加、修改与删除集合数据" class="headerlink" title="添加、修改与删除集合数据"></a>添加、修改与删除集合数据</h3><p>查看</p>
<p>db.users.find()</p>
<p>添加</p>
<p>db.users.save({name: ‘zhangsan’, age: 25, sex: true});</p>
<p>db.users.insertOne({name: ‘zhangsan’, age: 25, sex: true});</p>
<p>db.users.insertMany([{name: ‘zhangsan’, age: 25, sex: true},{name: ‘zhangsan’, age: 25, sex: true}]);</p>
<p>修改</p>
<p>db.users.update({age: 25}(约定条件，全部修改只写{}), {$set: {name: ‘changeName’,sex:1}}, false, true);</p>
<p>第三个参数为，如果没有这个数据，会不会创建，第四个参数为，如果有很多，是要全改true，还是只改第一条</p>
<p>相当于：update users set name = ‘changeName’ where age = 25;</p>
<p>db.users.update({name: ‘Lisi’}, {$inc: {age: 50}}, false, true);</p>
<p>相当于：update users set age = age + 50 where name = ‘Lisi’;</p>
<p>db.users.update({name: ‘Lisi’}, {$inc: {age: 50}, $set: {name: ‘hoho’}}, false, true);</p>
<p>相当于：update users set age = age + 50, name = ‘hoho’ where name = ‘Lisi’;</p>
<p>删除</p>
<p>db.users.remove({age: 32});符合条件全删<br>db.users.remove({age: 132}，{justone:true});只删一条<br>db.users.remove({});删除所有document</p>
<p>查询修改删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">db.users.findAndModify(&#123;</span><br><span class="line">    query: &#123;age: &#123;$gte: 25&#125;&#125;, </span><br><span class="line">    sort: &#123;age: -1&#125;, </span><br><span class="line">    update: &#123;$set: &#123;name: &apos;a2&apos;&#125;, $inc: &#123;age: 2&#125;&#125;,</span><br><span class="line">    remove: true</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">db.runCommand(&#123; findandmodify : &quot;users&quot;, </span><br><span class="line">    query: &#123;age: &#123;$gte: 25&#125;&#125;, </span><br><span class="line">    sort: &#123;age: -1&#125;, </span><br><span class="line">    update: &#123;$set: &#123;name: &apos;a2&apos;&#125;, $inc: &#123;age: 2&#125;&#125;,</span><br><span class="line">    remove: true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>query 过滤条件 $gte大于</p>
<p>sort如果多个文档符合查询过滤条件，将以该参数指定的排列方式选择出排在首位的对象，该对象将被操作，-1位为降序</p>
<p>remove 若为true，被选中对象将在返回前被删除</p>
<p>update 一个 修改器对象</p>
<p>remove 创建新对象若查询结果为空</p>
<h4 id="聚集集合查询"><a href="#聚集集合查询" class="headerlink" title="聚集集合查询"></a>聚集集合查询</h4><p>查询所有记录</p>
<p>db.userInfo.find();</p>
<p>相当于：select* from userInfo;</p>
<p>查询去重后数据</p>
<p>db.userInfo.distinct(“name”);</p>
<p>相当于：select distict name from userInfo;</p>
<p>查询age = 22的记录</p>
<p>db.userInfo.find({“age”: 22});</p>
<p>相当于： select * from userInfo where age = 22;</p>
<p>查询age &gt; 22的记录</p>
<p>db.userInfo.find({age: {$gt: 22}});</p>
<p>相当于：select * from userInfo where age &gt;22;</p>
<p>查询age &lt; 22的记录</p>
<p>db.userInfo.find({age: {$lt: 22}});</p>
<p>相当于：select * from userInfo where age &lt;22;</p>
<p>查询age &gt;= 25的记录</p>
<p>db.userInfo.find({age: {$gte: 25}});</p>
<p>相当于：select * from userInfo where age &gt;= 25;</p>
<p>查询age &lt;= 25的记录</p>
<p>db.userInfo.find({age: {$lte: 25}});</p>
<p>查询age &gt;= 23 并且 age &lt;= 26</p>
<p>db.userInfo.find({age: {$gte: 23, $lte: 26}});</p>
<p>查询name中包含 mongo的数据</p>
<p>db.userInfo.find({name: /^mongo/});</p>
<p>//相当于%%<br>select * from userInfo where name like ‘%mongo%’;</p>
<p>查询name中以mongo开头的</p>
<p>db.userInfo.find({name: /^mongo/});</p>
<p>相当于select * from userInfo where name like ‘mongo%’;</p>
<p>查询指定列name、age数据</p>
<p>db.userInfo.find({}, {name: 1, age: 1});</p>
<p>相当于：select name, age from userInfo;</p>
<p>查询指定列name、age数据, age &gt; 25</p>
<p>db.userInfo.find({age: {$gt: 25}}, {name: 1, age: 1});</p>
<p>相当于：select name, age from userInfo where age &gt;25;</p>
<p>按照年龄排序</p>
<p>升序：db.userInfo.find().sort({age: 1});</p>
<p>降序：db.userInfo.find().sort({age: -1});</p>
<p>查询name = zhangsan, age = 22的数据</p>
<p>db.userInfo.find({name: ‘zhangsan’, age: 22});</p>
<p>相当于：select * from userInfo where name = ‘zhangsan’ and age =<br>’22’;</p>
<p>查询前5条数据</p>
<p>db.userInfo.find().limit(5);</p>
<p>相当于：select top 5 * from userInfo;</p>
<p>查询10条以后的数据</p>
<p>db.userInfo.find().skip(10);</p>
<p>相当于：select <em> from userInfo where id not in (<br>   select top 10 </em> from userInfo<br>);</p>
<p>查询在5-10之间的数据</p>
<p>db.userInfo.find().limit(10).skip(5);</p>
<p>or与 查询</p>
<p>db.userInfo.find({$or: [{age: 22}, {age: 25}]});</p>
<p>相当于：select * from userInfo where age = 22 or age = 25;</p>
<p>查询第一条数据</p>
<p>db.userInfo.findOne();</p>
<p>相当于：selecttop 1 * from userInfo;</p>
<p>db.userInfo.find().limit(1);</p>
<p>查询某个结果集的记录条数</p>
<p>db.userInfo.find({age: {$gte: 25}}).count();</p>
<p>相当于：select count(*) from userInfo where age &gt;= 20;</p>
  
	</div>
		<footer class="article-footer clearfix">




<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2017/11/22/node3/" data-title="node3 | Hexo" data-tsina="" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2017/11/22/node2/"  title="node2">
 <strong>NEXT:</strong><br/> 
 <span>node2
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Node第四课"><span class="toc-number">1.</span> <span class="toc-text">Node第四课</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Express-模板"><span class="toc-number">1.0.1.</span> <span class="toc-text">Express 模板</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#用法："><span class="toc-number">1.0.1.1.</span> <span class="toc-text">用法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#模板引擎："><span class="toc-number">1.0.1.2.</span> <span class="toc-text">模板引擎：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#服务端渲染："><span class="toc-number">1.0.1.3.</span> <span class="toc-text">服务端渲染：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MongoDB-数据库"><span class="toc-number">1.0.2.</span> <span class="toc-text">MongoDB 数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#关系型数据库和非关系型数据库的区别"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">关系型数据库和非关系型数据库的区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-安装MongoDB"><span class="toc-number">1.0.3.</span> <span class="toc-text">1.安装MongoDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MongoDB概念"><span class="toc-number">1.0.4.</span> <span class="toc-text">2.MongoDB概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-专业术语"><span class="toc-number">1.0.5.</span> <span class="toc-text">3.专业术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式："><span class="toc-number">1.0.6.</span> <span class="toc-text">4.mongodb的存储数据类似于js的json格式对象，或者json文件存储数据的方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-数据库"><span class="toc-number">1.0.7.</span> <span class="toc-text">5.数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-简单操作"><span class="toc-number">1.0.8.</span> <span class="toc-text">6.简单操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-文档"><span class="toc-number">1.0.9.</span> <span class="toc-text">7.文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-集合"><span class="toc-number">1.0.10.</span> <span class="toc-text">8.集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-数据类型"><span class="toc-number">1.0.11.</span> <span class="toc-text">9.数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-库的操作"><span class="toc-number">1.0.12.</span> <span class="toc-text">10.库的操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Collection聚集集合操作"><span class="toc-number">1.0.13.</span> <span class="toc-text">Collection聚集集合操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加、修改与删除集合数据"><span class="toc-number">1.1.</span> <span class="toc-text">添加、修改与删除集合数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#聚集集合查询"><span class="toc-number">1.1.1.</span> <span class="toc-text">聚集集合查询</span></a></li></ol></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  

  

  <div class="rsspart">
	<a href="" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font clearfix">
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2017 
		
		<a href="http://yoursite.com" target="_blank" title="John Doe">John Doe</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
